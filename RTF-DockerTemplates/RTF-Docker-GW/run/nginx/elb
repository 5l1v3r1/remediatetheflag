server{
    root /var/www/html;
	listen 80 default_server;
    server_name FQDNTOREPLACE;
    server_tokens off;
    if ($http_x_forwarded_proto != 'https') {            
        return 301 https://$server_name$request_uri;
    }
    add_header X-Content-Type-Options nosniff;
    add_header X-XSS-Protection "1; mode=block";
    add_header Strict-Transport-Security "max-age=31536000; includeSubdomains;";
	ssl off;

	location ~ /.well-known {
                allow all;
    }
    location /rtf/ {
        proxy_pass http://localhost:8080/guacamole/;
        proxy_buffering off;
        proxy_http_version 1.1;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection $http_connection;
        proxy_cookie_path /guacamole/ /rtf/;
        access_log off;
    }
    location /helper/ {
        #allow 10.0.0.0/18;
        #deny all;
        proxy_pass http://localhost:8080/helper/;
        add_header X-Frame-Options DENY;
        proxy_buffering off;
        proxy_http_version 1.1;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}