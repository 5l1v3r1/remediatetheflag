<!-- 
 *  
 * REMEDIATE THE FLAG
 * Copyright 2018 - Andrea Scaduto 
 * remediatetheflag@gmail.com
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * 
 -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Remediate The Flag">
<meta name="author" content="sk4ddy">
<title>Remediate the Flag - Exercise</title>
<link rel="icon" type="image/png" sizes="32x32"
	href="/assets/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96"
	href="/assets/img/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16"
	href="/assets/img/favicon-16x16.png">
<link href="/assets/css/lib.css" rel="stylesheet">
<link href="/assets/css/style.css" rel="stylesheet">
<link href="/assets/css/exercise.css" rel="stylesheet">
<link rel="stylesheet" href="/assets/css/viewer.css">
<link rel="resource" type="application/l10n"
	href="/assets/css/locale.properties">
</head>
<body>
	<div ng-app="rtfNg">
		<div class="ng-cloak" id="exercise" ng-controller="exercise">
			<nav
				class="navbar navbar-default navbar-fixed-top height35 borderBottom2">
				<div id="navContainer" class="container">
					<div class="navbar-header">
						<a class="navbar-brand rtfLogo height35" href="">RTF.</a>
						<button type="button" class="navbar-toggle collapsed"
							data-toggle="collapse" data-target="#navbar"
							aria-expanded="false" aria-controls="navbar">
							<span class="sr-only">Toggle navigation</span> <span
								class="icon-bar"></span> <span class="icon-bar"></span> <span
								class="icon-bar"></span>
						</button>
						<a class="navbar-brand exerciseNavBrand height35" href="">{{exerciseName}}</a>

					</div>

					<div id="navbar" class="navbar-collapse collapse height35">
						<ul class="nav navbar-nav exerciseNavbar height35">
							<li class="dropdown"><a title="exercise-info" class="dropdown-toggle"
								role="button" aria-haspopup="true" aria-expanded="false">Exercise
									Info<span class="caret"></span>
							</a>
								<ul class="dropdown-menu">
									<li ng-repeat="topic in exerciseDetails.info">

										<div class="panel panel-default">
											<div class="panel-heading">
												<h4 class="panel-title">
													<a data-toggle="collapse" data-target="#{{topic.id}}"
														href="" class="collapsed"> {{topic.title}} </a>
												</h4>
											</div>
											<div id="{{topic.id}}" class="panel-collapse collapse in">
												<div class="panel-body">
													<div class="row">
														<div class="col-md-12">
															<p>{{topic.description}}</p>
															<img class="pictureH320"
																ng-src="/user/image?type=exerciseInfo&id={{topic.id}}">
														</div>
													</div>
												</div>
											</div>
										</div>
									</li>
								</ul></li>
							<li class="dropdown"><a class="dropdown-toggle"
								title="exercise-flags" role="button" aria-haspopup="true" aria-expanded="false">Exercise
									Flags <span class="caret"></span>
							</a>
								<ul class="dropdown-menu">
									<li>
										<div class="left">
											<div ng-show="asNotStarted">
												<p class="lead alertPLead">To check the remediation
													status, start the Application Server in the RTF exercise.
													Reference the 'Exercise Information' tab for instructions.</p>
											</div>
											<div class="panel-group" id="accordion">
												<div ng-repeat="flag in exerciseDetails.flags"
													class="panel panel-default">
													<div class="panel-heading">
														<h4 class="panel-title">
															<a data-toggle="collapse" data-target="#{{flag.id}}"
																href=""> {{flag.title}} </a>
														</h4>
													</div>
													<div id="{{flag.id}}" class="panel-collapse collapse in">
														<div class="panel-body">
															<table>
																<thead class="theadSpace">
																	<tr>
																		<th>Type</th>
																		<th>Instructions</th>
																		<th>Required</th>
																		<th class="center">Hint</th>
																		<th class="center">Check result</th>
																		<th></th>
																	</tr>
																</thead>
																<tbody>
																	<tr ng-repeat="f in flag.flagList" class="spaceUnder">
																		<td class="w10">{{f.type}}</td>
																		<td class="w60">{{f.instructions}}</td>
																		<td class="w10">{{f.type=='EXPLOITATION' &&
																			"Optional" || "Required"}}</td>
																		<td class="w10 center">
																			<button ng-show="f.hintAvailable"
																				ng-click="getHintModal(f.id)"
																				class="btn btn-sm btn-info outline">Show
																				Hint</button>
																		</td>
																		<td class="w10" ng-show="!f.selfCheckName"></td>
																		<td
																			ng-show="f.selfCheckName && !isAvailable(f.selfCheckStatus)"
																			class="center w10">
																			<button ng-click="refreshResults(exerciseDetails.id)"
																				class="btn btn-sm btn-info outline refreshResults">Refresh
																				Result</button>

																		</td>
																		<td
																			ng-class="isAvailable(f.selfCheckStatus) && getRemedationTableClassFromSelfCheckName(f.selfCheckStatus)"
																			class="w10" ng-show="isAvailable(f.selfCheckStatus)">{{getSelfChekResult(f.selfCheckStatus)}}</td>
																		<td class="w10">
																			<button ng-show="isAvailable(f.selfCheckStatus)"
																				ng-click="refreshResults(exerciseDetails.id)"
																				class="btn btn-sm btn-info outline refreshResults">Refresh</button>
																		</td>
																	</tr>
																</tbody>
															</table>
														</div>
													</div>
												</div>
											</div>

										</div>

									</li>

								</ul></li>

							<li class="dropdown"><a title="exercise-reference" class="dropdown-toggle"
								role="button" aria-haspopup="true" aria-expanded="false">Exercise
									Reference <span class="caret"></span>
							</a>
								<ul class="dropdown-menu paddingTop0" >
									<li>
									<iframe id="referenceIframe" ng-src="{{viewerUrl| trustUrl}}"></iframe>
									
									</li>

								</ul></li>
						</ul>
						<div class="exerciseButtons">
							<span class="badge" id="cdown">{{countdown}}</span> <a
								ng-click="stopExercise()" class="btn btn-xs btn-success">Mark
								Completed</a> <a ng-click="backToRTF()"
								class="btn marginLeft10  btn-xs btn-primary">Back to RTF</a>
						</div>
					</div>

					<!--/.nav-collapse -->
				</div>
			</nav>
			<div id="iframeDiv">
				<iframe ng-src="{{guacFullUrl | trustUrl}}" id="exerciseIframe"></iframe>
			</div>

			<div id="hintReceivedModal" class="modal fade" tabindex="-1"
				role="dialog">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
							<h4 class="modal-title">Hint</h4>
						</div>
						<div class="modal-body">
							<p class="lead">{{hintData.text}}</p>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default"
								data-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
			</div>
			<div id="getHintModal" class="modal fade" tabindex="-1" role="dialog">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
							<h4 class="modal-title">Hint</h4>
						</div>
						<div class="modal-body">
							<p class="lead">Each hint has an impact on the final score.</p>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default"
								data-dismiss="modal">Close</button>
							<button type="button" ng-click="getHint()"
								class="btn btn-primary">Get Hint</button>
						</div>
					</div>
				</div>
			</div>

		</div>
	</div>
	<div class="waitLoader"></div>
	<script src="/assets/js/libu.min.js"></script>
	<script src="/assets/js/pdf.js"></script>
	<script src="/user/js/exercise.js"></script>
</body>
</html>